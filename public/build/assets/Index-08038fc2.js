import{r as c,j as e,d as r}from"./app-3e15f8da.js";import j from"./Layout-2adb52d5.js";import{d}from"./index.esm-ca5130bf.js";import{S as i}from"./sweetalert2.esm.all-dd0c4ce7.js";import"./ReactToastify-85466284.js";import"./axios-21b846bc.js";const C=({positions:a,search:o})=>{const[l,x]=c.useState(""),[n,m]=c.useState("");console.log(a);const u=t=>{x(t.target.value)},h=t=>{m(t.target.value)},p=()=>{r.Inertia.get(route("admin.positions"),{search:l,status:n})},f=t=>{i.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, lose it!"}).then(s=>{s.isConfirmed&&r.Inertia.post(route("admin.positions.make-lose"),{id:t})})},y=t=>{i.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",input:"text",inputLabel:"Enter Amount",inputPlaceholder:"Enter the Amount",showCancelButton:!0,confirmButtonColor:"#4CAF50",cancelButtonColor:"#d33",confirmButtonText:"Win it!",inputValidator:s=>{if(!s)return"You need to enter an Amount!";if(!/^[1-9]\d*(\.\d+)?$/.test(s))return'Please enter a valid positive number (no leading zeros, no "e" notation)!'}}).then(s=>{s.isConfirmed&&r.Inertia.post(route("admin.positions.make-win"),{id:t,amount:s.value})})};return e.jsxs(j,{title:"Positions",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsx("div",{className:"w-full md:w-2/3",children:e.jsx("input",{type:"search",value:l,onChange:u,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search..."})}),e.jsx("div",{className:"w-full md:w-1/3",children:e.jsxs("select",{value:n,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"Settled",children:"Settled"}),e.jsx("option",{value:"Not Settled",children:"Unsettled"})]})}),e.jsx("div",{className:"w-full md:w-1/4",children:e.jsx("button",{onClick:p,className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Search"})}),o&&e.jsx(d,{href:route("admin.positions"),className:"w-full md:w-auto bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded text-center",children:"Clear"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Identifier"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Symbol"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entry Price"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.data.length>0?a.data.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[t.identifier,e.jsxs("div",{className:"text-xs text-gray-500",children:[t.traded_by.full_name,e.jsx("br",{}),t.traded_by.customer_code]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[t.symbol,e.jsx("div",{className:"text-xs text-gray-500",children:t.is_crypto?"Crypto":"Forex"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[t.amount,e.jsxs("div",{className:"text-xs text-gray-500",children:["PNL :",e.jsx("span",{className:`font-bold ${t.pnl>0?"text-green-600":t.pnl<0?"text-red-600":"text-black"}`,children:t.pnl})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[e.jsx("span",{className:"font-semibold",children:t.entry_price})," USDT",e.jsxs("div",{className:"text-xs text-gray-500",children:["Traded on :",e.jsx("span",{className:"font-semibold",children:t.traded_datetime}),e.jsx("br",{}),"Duration :",e.jsxs("span",{className:"font-semibold",children:[t.trade_duration," Minutes"]}),e.jsx("br",{}),"Will close on :",e.jsx("span",{className:"font-semibold",children:t.will_close_at})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.status==="Not Settled"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-1 px-2 rounded text-xs mr-2",onClick:s=>f(t.id),children:"Lose"}),e.jsx("button",{className:"bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded text-xs",onClick:s=>y(t.id),children:"Win"})]}):null,t.status==="Settled"?e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["Closed At Time : ",e.jsx("span",{className:"font-semibold",children:t.closed_at})]}),e.jsx("br",{}),e.jsxs("span",{children:["Closed At : ",e.jsxs("span",{className:"font-semibold",children:[t.trade_close_price," USDT"]})]})]}):null]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("div",{className:"text-sm text-gray-900",children:"No positions found"})})})})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{children:["Showing ",a.from," to ",a.to," of ",a.total," results"]}),e.jsx("div",{className:"flex",children:a.links.map((t,s)=>e.jsx(d,{href:t.url,className:`px-4 py-2 border ${t.active?"bg-blue-500 text-white":"bg-white text-blue-500 hover:bg-blue-100"} ${!t.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},s))})]})]})]})};export{C as default};
