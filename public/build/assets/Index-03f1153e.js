import{r,j as e,d}from"./app-0795022b.js";import T from"./Layout-a2a05986.js";import{W as Y,d as i}from"./index.esm-e7d95d85.js";import{b,c as o,d as K,e as L}from"./index-69ec4f7e.js";import{S as j}from"./sweetalert2.esm.all-dd0c4ce7.js";import"./ReactToastify-ac3eb4f3.js";import"./axios-21b846bc.js";const Q=({customers:a,search:g,currencies:m,accounts:x})=>{const[u,y]=r.useState(""),[N,h]=r.useState(!1),[w,p]=r.useState(""),{data:f,setData:v,post:k,processing:V,errors:n}=Y({amount:"",currency_id:"",type:"cash",account:""}),c=r.useRef(null),C=s=>{j.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, block it!"}).then(t=>{t.isConfirmed&&d.Inertia.post(route("admin.customers.block"),{id:s.id})})},_=s=>{j.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, unblock it!"}).then(t=>{t.isConfirmed&&d.Inertia.post(route("admin.customers.unblock"),{id:s.id})})},S=s=>{y(s.target.value)},D=s=>s.kyc_id==null?e.jsxs("span",{className:"text-red-600 flex items-center",children:[e.jsx(o,{className:"mr-1"})," Not Submitted"]}):s.is_kyc_verified?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-green-600 flex items-center",children:[e.jsx(b,{className:"mr-1"})," Verified"]}),e.jsx(i,{href:route("admin.kyc",{id:s.id}),className:"flex items-center bg-blue-500 text-white px-2 py-1 rounded-md text-sm",children:"View KYC"})]}):e.jsx("span",{className:"text-red-600 flex items-center",children:e.jsxs(i,{href:route("admin.kyc",{id:s.id}),className:"flex items-center bg-blue-500 hover:bg-blue-700 text-white px-2 py-1 rounded-md text-sm",children:[e.jsx(o,{className:"mr-1"})," Verify KYC"]})}),F=s=>{s.key==="Enter"&&(s.preventDefault(),d.Inertia.get(route("admin.customers"),{search:u}))},B=s=>{h(!0),p(s)},l=s=>{const{name:t,value:E}=s.target;v(t,E)},I=s=>{s.preventDefault(),p(""),h(!1)},A=s=>{s.preventDefault(),console.log("Customer ID from submit",f),k(route("admin.deposit",{customer_id:w}))};return r.useEffect(()=>{const s=t=>{c.current&&!c.current.contains(t.target)&&I(t)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),e.jsxs(T,{title:"Customers",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsx("div",{className:"w-full md:flex-grow",children:e.jsx("input",{type:"search",value:u,onChange:S,onKeyDown:F,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Press Enter to Search"})}),g&&e.jsx(i,{href:route("admin.customers"),className:"w-full md:w-auto bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded text-center",children:"Clear"})]}),e.jsx("div",{className:"mt-4 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Full Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"KYC"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.data.length>0?a.data.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.full_name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.customer_code}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsxs("span",{className:"block",children:["Balance: ",e.jsx("span",{className:"font-bold",children:s.balance_usdt})]}),e.jsxs("span",{className:"block",children:["Total Deposit: ",e.jsx("span",{className:"font-bold",children:s.total_deposit})]}),e.jsxs("span",{className:"block",children:["Total Withdraw: ",e.jsx("span",{className:"font-bold",children:s.total_withdraw})]}),e.jsxs("span",{className:"block",children:["Pending Deposit: ",e.jsx("span",{className:"font-bold",children:s.pending_deposit})]}),e.jsxs("span",{className:"block",children:["Freezed: ",e.jsx("span",{className:"font-bold",children:s.freezed})]}),e.jsxs("span",{className:"block",children:["Traded Amount: ",e.jsx("span",{className:"font-bold",children:s.traded_amount})]}),e.jsxs("span",{className:"block",children:["Credit Score: ",e.jsx("span",{className:"font-bold",children:s.credit_score})]})]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.email}),e.jsx("div",{className:"text-sm text-gray-500",children:s.is_email_verified?e.jsxs("span",{className:"text-green-600 flex items-center",children:[e.jsx(b,{className:"mr-1"})," Verified"]}):e.jsxs("span",{className:"text-red-600 flex items-center",children:[e.jsx(o,{className:"mr-1"})," Not Verified"]})})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[s.country_code.country_name,"(",s.country_code.code,")",e.jsx("p",{children:s.contact_no})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:D(s)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>B(s.id),"data-customer-id":s.id,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded inline-flex items-center mr-2 text-xs",children:"Deposit"}),s.is_active?e.jsx(e.Fragment,{children:e.jsxs("button",{onClick:()=>C(s),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded inline-flex items-center mr-2 text-xs",children:[e.jsx(K,{className:"mr-1"}),e.jsx("span",{children:"Block"})]})}):e.jsx(e.Fragment,{children:e.jsxs("button",{onClick:()=>_(s),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded inline-flex items-center mr-2 text-xs",children:[e.jsx(L,{className:"mr-1"}),e.jsx("span",{children:"Unblock"})]})})]})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("div",{className:"text-sm text-gray-900",children:"No customers found"})})})})]})}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{children:["Showing ",a.from," to ",a.to," of ",a.total," results"]}),e.jsx("div",{className:"flex",children:a.links.map((s,t)=>e.jsx(i,{href:s.url,className:`px-4 py-2 border ${s.active?"bg-blue-500 text-white":"bg-white text-blue-500 hover:bg-blue-100"} ${!s.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},t))})]}),N&&e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),e.jsx("div",{ref:c,className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:e.jsxs("form",{onSubmit:s=>A(s),className:"p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Deposit"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700",children:"Amount"}),e.jsx("input",{type:"number",name:"amount",id:"amount",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0,onChange:l}),n.amount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.amount})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"currency_id",className:"block text-sm font-medium text-gray-700",children:"Currency"}),e.jsxs("select",{name:"currency_id",id:"currency_id",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0,onChange:l,children:[e.jsx("option",{value:"",children:"Select Currency"}),m&&m.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),n.currency_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.currency_id})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700",children:"Type"}),e.jsxs("select",{name:"type",id:"type",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0,onChange:l,children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"account",children:"Account"})]}),n.type&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.type})]}),f.type==="account"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"account",className:"block text-sm font-medium text-gray-700",children:"Account"}),e.jsxs("select",{name:"account",id:"account",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onChange:l,children:[e.jsx("option",{value:"",children:"Select Account"}),x&&x.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]}),n.account&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.account})]}),e.jsx("div",{className:"mt-5 sm:mt-6",children:e.jsx("button",{type:"submit",className:"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm",children:"Submit"})})]})})]})})]})};export{Q as default};
